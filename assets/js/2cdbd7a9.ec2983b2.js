"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2174],{3905:(e,t,r)=>{r.d(t,{Zo:()=>m,kt:()=>h});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},m=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=p(r),d=a,h=u["".concat(s,".").concat(d)]||u[d]||c[d]||i;return r?n.createElement(h,o(o({ref:t},m),{},{components:r})):n.createElement(h,o({ref:t},m))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=r[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},9792:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const i={},o="Summarizing Text with Map-Reduce in LLM-Chain",l={unversionedId:"getting-started-tutorial/summarizing-text-with-map-reduce",id:"getting-started-tutorial/summarizing-text-with-map-reduce",title:"Summarizing Text with Map-Reduce in LLM-Chain",description:"Having problems? Don't worry, reach out on discord and we will help you out.",source:"@site/docs/getting-started-tutorial/05-summarizing-text-with-map-reduce.md",sourceDirName:"getting-started-tutorial",slug:"/getting-started-tutorial/summarizing-text-with-map-reduce",permalink:"/docs/getting-started-tutorial/summarizing-text-with-map-reduce",draft:!1,editUrl:"https://github.com/sobelio/llm-chain/tree/main/docs/docs/getting-started-tutorial/05-summarizing-text-with-map-reduce.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"sidebar",previous:{title:"Creating Your First Sequential Chain",permalink:"/docs/getting-started-tutorial/building-a-multi-step-chain"},next:{title:"Development Setup",permalink:"/docs/dev-setup"}},s={},p=[],m={toc:p},u="wrapper";function c(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"summarizing-text-with-map-reduce-in-llm-chain"},"Summarizing Text with Map-Reduce in LLM-Chain"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Having problems? Don't worry, reach out on ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/kewN9Gtjt2"},"discord")," and we will help you out.")),(0,a.kt)("p",null,"Map-reduce is a powerful technique for processing and aggregating data in parallel. In this tutorial, we'll explore how to use map-reduce in ",(0,a.kt)("inlineCode",{parentName:"p"},"llm-chain")," to summarize text effectively. We'll cover implementing a basic map-reduce for text summarization."),(0,a.kt)("p",null,'To start, create a file named "article_to_summarize.md", take the content of a wikipedia article and paste it in there.'),(0,a.kt)("p",null,"Here's a Rust program that demonstrates how to create a map-reduce chain for summarizing text:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'use llm_chain::chains::map_reduce::Chain;\nuse llm_chain::step::Step;\nuse llm_chain::{executor, parameters, prompt, Parameters};\n\n#[tokio::main(flavor = "current_thread")]\nasync fn main() -> Result<(), Box<dyn std::error::Error>> {\n    // Create a new ChatGPT executor with the default settings\n    let exec = executor!()?;\n\n    // Create the "map" step to summarize an article into bullet points\n    let map_prompt = Step::for_prompt_template(prompt!(\n        "You are a bot for summarizing wikipedia articles, you are terse and focus on accuracy",\n        "Summarize this article into bullet points:\\n{{text}}"\n    ));\n\n    // Create the "reduce" step to combine multiple summaries into one\n    let reduce_prompt = Step::for_prompt_template(prompt!(\n        "You are a diligent bot that summarizes text",\n        "Please combine the articles below into one summary as bullet points:\\n{{text}}"\n    ));\n\n    // Create a map-reduce chain with the map and reduce steps\n    let chain = Chain::new(map_prompt, reduce_prompt);\n\n    // Load the content of the article to be summarized\n    let article = include_str!("article_to_summarize.md");\n\n    // Create a vector with the Parameters object containing the text of the article\n    let docs = vec![parameters!(article)];\n\n    // Run the chain with the provided documents and an empty Parameters object for the "reduce" step\n    let res = chain.run(docs, Parameters::new(), &exec).await.unwrap();\n\n    // Print the result to the console\n    println!("{}", res.to_immediate().await?.as_content());\n    Ok(())\n}\n')),(0,a.kt)("p",null,"Let's break down the code and understand the different parts:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Define the map and reduce prompts as Step objects:\na. The map_prompt summarizes a given article into bullet points.\nb. The reduce_prompt combines multiple summaries into a single summary as bullet points."),(0,a.kt)("li",{parentName:"ol"},"Create a new map-reduce Chain by providing the map_prompt and reduce_prompt."),(0,a.kt)("li",{parentName:"ol"},"Load the article to be summarized and create a Parameters object with the text."),(0,a.kt)("li",{parentName:"ol"},"Execute the map-reduce Chain with the provided Parameters and store the result in res."),(0,a.kt)("li",{parentName:"ol"},"Print the LLM response to the console.")),(0,a.kt)("p",null,"This should be able to summarize any wikipedia article you might find. Play around with the prompt templates to make it best fit your usecase."),(0,a.kt)("hr",null),(0,a.kt)("p",null,"That's it folks, thanks for following along for the tutorial. You are now ready to use ",(0,a.kt)("inlineCode",{parentName:"p"},"llm-chain")," for something useful. Don't forget to stop by ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/kewN9Gtjt2"},"discord")," and share what you are making."))}c.isMDXComponent=!0}}]);